[debug] [2018-05-02T17:22:44.320Z] ----------------------------------------------------------------------
[debug] [2018-05-02T17:22:44.321Z] Command:       /usr/local/Cellar/node/10.0.0/bin/node /usr/local/bin/firebase deploy --only functions
[debug] [2018-05-02T17:22:44.322Z] CLI Version:   3.18.4
[debug] [2018-05-02T17:22:44.322Z] Platform:      darwin
[debug] [2018-05-02T17:22:44.322Z] Node Version:  v10.0.0
[debug] [2018-05-02T17:22:44.323Z] Time:          Wed May 02 2018 18:22:44 GMT+0100 (BST)
[debug] [2018-05-02T17:22:44.323Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-05-02T17:22:44.332Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-05-02T17:22:44.332Z] > authorizing via signed-in user
[debug] [2018-05-02T17:22:44.333Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:22:44 GMT+0100 (BST)
[debug] [2018-05-02T17:22:44.967Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:22:44.968Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/ngfb-multitenant/tokens  
  
 Wed May 02 2018 18:22:44 GMT+0100 (BST)
[debug] [2018-05-02T17:22:45.708Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'ngfb-multitenant'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-05-02T17:22:51.919Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "~5.12.0",
    "firebase-functions": "^1.0.1"
  },
  "devDependencies": {
    "tslint": "^5.8.0",
    "typescript": "^2.5.3"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-05-02T17:22:51.920Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:22:51 GMT+0100 (BST)
[debug] [2018-05-02T17:22:51.920Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:22:51 GMT+0100 (BST)
[debug] [2018-05-02T17:22:55.033Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:22:55.543Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-05-02T17:22:55.545Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:22:55 GMT+0100 (BST)
[debug] [2018-05-02T17:22:58.302Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:22:58.303Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/105654261497:getServerAppConfig  
  
 Wed May 02 2018 18:22:58 GMT+0100 (BST)
[debug] [2018-05-02T17:23:00.555Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-05-02T17:23:00.557Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/ngfb-multitenant/configs  
  
 Wed May 02 2018 18:23:00 GMT+0100 (BST)
[debug] [2018-05-02T17:23:02.434Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (46.15 KB) for uploading
[debug] [2018-05-02T17:23:02.748Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions:generateUploadUrl  
  
 Wed May 02 2018 18:23:02 GMT+0100 (BST)
[debug] [2018-05-02T17:23:34.859Z] <<< HTTP RESPONSE 503
[debug] [2018-05-02T17:23:34.859Z] <<< HTTP RESPONSE BODY {
  "error": {
    "code": 503,
    "message": "The service is currently unavailable.",
    "status": "UNAVAILABLE"
  }
}

[debug] [2018-05-02T17:23:34.862Z] TypeError: Cannot create property 'error' on string '{
  "error": {
    "code": 503,
    "message": "The service is currently unavailable.",
    "status": "UNAVAILABLE"
  }
}
'
    at module.exports (/usr/local/lib/node_modules/firebase-tools/lib/responseToError.js:11:16)
    at Request._callback (/usr/local/lib/node_modules/firebase-tools/lib/api.js:47:25)
    at Request.self.callback (/usr/local/lib/node_modules/firebase-tools/node_modules/request/request.js:186:22)
    at Request.emit (events.js:182:13)
    at Request.EventEmitter.emit (domain.js:442:20)
    at Request.<anonymous> (/usr/local/lib/node_modules/firebase-tools/node_modules/request/request.js:1163:10)
    at Request.emit (events.js:182:13)
    at Request.EventEmitter.emit (domain.js:442:20)
    at IncomingMessage.<anonymous> (/usr/local/lib/node_modules/firebase-tools/node_modules/request/request.js:1085:12)
    at Object.onceWrapper (events.js:275:13)
[error] 
[error] Error: An unexpected error has occurred.
[debug] [2018-05-02T17:27:31.066Z] ----------------------------------------------------------------------
[debug] [2018-05-02T17:27:31.069Z] Command:       /usr/local/Cellar/node/10.0.0/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2018-05-02T17:27:31.070Z] CLI Version:   3.18.4
[debug] [2018-05-02T17:27:31.070Z] Platform:      darwin
[debug] [2018-05-02T17:27:31.070Z] Node Version:  v10.0.0
[debug] [2018-05-02T17:27:31.071Z] Time:          Wed May 02 2018 18:27:31 GMT+0100 (BST)
[debug] [2018-05-02T17:27:31.071Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-05-02T17:27:31.082Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-05-02T17:27:31.082Z] > authorizing via signed-in user
[debug] [2018-05-02T17:27:31.084Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:27:31 GMT+0100 (BST)
[debug] [2018-05-02T17:27:31.677Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:27:31.678Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/ngfb-multitenant/tokens  
  
 Wed May 02 2018 18:27:31 GMT+0100 (BST)
[debug] [2018-05-02T17:27:32.219Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'ngfb-multitenant'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-05-02T17:27:38.080Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "~5.12.0",
    "firebase-functions": "^1.0.1"
  },
  "devDependencies": {
    "tslint": "^5.8.0",
    "typescript": "^2.5.3"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-05-02T17:27:38.081Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:27:38 GMT+0100 (BST)
[debug] [2018-05-02T17:27:38.081Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:27:38 GMT+0100 (BST)
[debug] [2018-05-02T17:27:41.544Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:27:42.087Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-05-02T17:27:42.088Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:27:42 GMT+0100 (BST)
[debug] [2018-05-02T17:27:44.043Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:27:44.043Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/105654261497:getServerAppConfig  
  
 Wed May 02 2018 18:27:44 GMT+0100 (BST)
[debug] [2018-05-02T17:27:46.452Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-05-02T17:27:46.454Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/ngfb-multitenant/configs  
  
 Wed May 02 2018 18:27:46 GMT+0100 (BST)
[debug] [2018-05-02T17:27:48.124Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (46.15 KB) for uploading
[debug] [2018-05-02T17:27:48.373Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions:generateUploadUrl  
  
 Wed May 02 2018 18:27:48 GMT+0100 (BST)
[debug] [2018-05-02T17:27:50.856Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:27:50.857Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/1309a4dc-84fb-4aee-8ec8-bbce724d8ba1.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525283873&Signature=E62Pzy%2B45u%2BQNMgW7qF42vV6zw%2FIX1IIbR4T5iiDRhaKL48zHbIh8p6CMf1TCL0jdg5FhmPFC%2BpBf8kBfrFaMrSe614flFIYXnpOQFmm0YlGigXrMLkcJ01Po%2BCXHWuCFSmrZ5dIOmKmN80iONOI9PoVuT7LM%2F%2BKvOFRclgaOrNiUEM86XOOZEiC8SfXqKSY4CFD66sVXYJ%2FmA3fd9IVVR8WOo4q5U4rvdJG8bwwRmfqKgfPIHZvlQ1JTsrAL1ZwmE9PJZvsqbUQnsOfosbbTgt%2FumBTy1%2F2Vke0Kklb3oJgCkm%2BodoJ675l3z9g1Adb29%2F3WDYmeBh2Nq1WiRVVZw%3D%3D  
 ReadStream {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 65536,
     buffer: BufferList { length: 1 },
     length: 47259,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: true,
     endEmitted: false,
     reading: false,
     errorEmitted: false,
     sync: false,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     emitClose: false,
     destroyed: false,
     defaultEncoding: 'utf8',
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: { end: [Function] },
  _eventsCount: 1,
  _maxListeners: undefined,
  path: '/var/folders/m5/_np__spd73ggl566q0ndqjfh0000gn/T/firebase-functions-75143x9ArpVzZaZ5a.zip',
  fd: 19,
  flags: 'r',
  mode: 438,
  start: undefined,
  end: Infinity,
  autoClose: true,
  pos: undefined,
  bytesRead: 47259,
  closed: false } 
 Wed May 02 2018 18:27:50 GMT+0100 (BST)
[debug] [2018-05-02T17:27:54.647Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-05-02T17:27:54.648Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions  
  
 Wed May 02 2018 18:27:54 GMT+0100 (BST)
[debug] [2018-05-02T17:27:56.591Z] <<< HTTP RESPONSE 200
[info] i  functions: creating function createUser...
[debug] [2018-05-02T17:27:56.593Z] Trigger is:  {"eventTrigger":{"resource":"projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2018-05-02T17:27:56.594Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions  
 { sourceUploadUrl: 'https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/1309a4dc-84fb-4aee-8ec8-bbce724d8ba1.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525283873&Signature=E62Pzy%2B45u%2BQNMgW7qF42vV6zw%2FIX1IIbR4T5iiDRhaKL48zHbIh8p6CMf1TCL0jdg5FhmPFC%2BpBf8kBfrFaMrSe614flFIYXnpOQFmm0YlGigXrMLkcJ01Po%2BCXHWuCFSmrZ5dIOmKmN80iONOI9PoVuT7LM%2F%2BKvOFRclgaOrNiUEM86XOOZEiC8SfXqKSY4CFD66sVXYJ%2FmA3fd9IVVR8WOo4q5U4rvdJG8bwwRmfqKgfPIHZvlQ1JTsrAL1ZwmE9PJZvsqbUQnsOfosbbTgt%2FumBTy1%2F2Vke0Kklb3oJgCkm%2BodoJ675l3z9g1Adb29%2F3WDYmeBh2Nq1WiRVVZw%3D%3D',
  name: 'projects/ngfb-multitenant/locations/us-central1/functions/createUser',
  entryPoint: 'createUser',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}',
     eventType: 'providers/cloud.firestore/eventTypes/document.create',
     service: 'firestore.googleapis.com' } } 
 Wed May 02 2018 18:27:56 GMT+0100 (BST)
[debug] [2018-05-02T17:27:58.745Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:27:58.746Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:27:58 GMT+0100 (BST)
[debug] [2018-05-02T17:28:00.399Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:02.406Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:02 GMT+0100 (BST)
[debug] [2018-05-02T17:28:04.281Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:06.284Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:06 GMT+0100 (BST)
[debug] [2018-05-02T17:28:08.058Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:10.064Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:10 GMT+0100 (BST)
[debug] [2018-05-02T17:28:11.373Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:13.373Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:13 GMT+0100 (BST)
[debug] [2018-05-02T17:28:14.821Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:16.822Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:16 GMT+0100 (BST)
[debug] [2018-05-02T17:28:18.111Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:20.113Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:20 GMT+0100 (BST)
[debug] [2018-05-02T17:28:21.419Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:23.422Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:23 GMT+0100 (BST)
[debug] [2018-05-02T17:28:24.753Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:26.757Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:26 GMT+0100 (BST)
[debug] [2018-05-02T17:28:28.076Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:30.077Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:30 GMT+0100 (BST)
[debug] [2018-05-02T17:28:31.391Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:33.392Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:33 GMT+0100 (BST)
[debug] [2018-05-02T17:28:35.118Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:37.121Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:37 GMT+0100 (BST)
[debug] [2018-05-02T17:28:38.926Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:40.926Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:40 GMT+0100 (BST)
[debug] [2018-05-02T17:28:42.860Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:44.861Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:44 GMT+0100 (BST)
[debug] [2018-05-02T17:28:46.459Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:48.464Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:48 GMT+0100 (BST)
[debug] [2018-05-02T17:28:50.046Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:28:52.047Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0syNEVvXzhWN3Fz  
  
 Wed May 02 2018 18:28:52 GMT+0100 (BST)
[debug] [2018-05-02T17:28:53.380Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:33:40.086Z] ----------------------------------------------------------------------
[debug] [2018-05-02T17:33:40.088Z] Command:       /usr/local/Cellar/node/10.0.0/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2018-05-02T17:33:40.088Z] CLI Version:   3.18.4
[debug] [2018-05-02T17:33:40.089Z] Platform:      darwin
[debug] [2018-05-02T17:33:40.089Z] Node Version:  v10.0.0
[debug] [2018-05-02T17:33:40.089Z] Time:          Wed May 02 2018 18:33:40 GMT+0100 (BST)
[debug] [2018-05-02T17:33:40.090Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-05-02T17:33:40.100Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-05-02T17:33:40.100Z] > authorizing via signed-in user
[debug] [2018-05-02T17:33:40.102Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:33:40 GMT+0100 (BST)
[debug] [2018-05-02T17:33:40.721Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:33:40.723Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/ngfb-multitenant/tokens  
  
 Wed May 02 2018 18:33:40 GMT+0100 (BST)
[debug] [2018-05-02T17:33:41.237Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'ngfb-multitenant'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[error] 
[error] Error: functions predeploy error: Command terminated with non-zero exit code2
[debug] [2018-05-02T17:34:11.276Z] ----------------------------------------------------------------------
[debug] [2018-05-02T17:34:11.279Z] Command:       /usr/local/Cellar/node/10.0.0/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2018-05-02T17:34:11.279Z] CLI Version:   3.18.4
[debug] [2018-05-02T17:34:11.279Z] Platform:      darwin
[debug] [2018-05-02T17:34:11.279Z] Node Version:  v10.0.0
[debug] [2018-05-02T17:34:11.281Z] Time:          Wed May 02 2018 18:34:11 GMT+0100 (BST)
[debug] [2018-05-02T17:34:11.281Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-05-02T17:34:11.293Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-05-02T17:34:11.294Z] > authorizing via signed-in user
[debug] [2018-05-02T17:34:11.296Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:34:11 GMT+0100 (BST)
[debug] [2018-05-02T17:34:11.904Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:11.905Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/ngfb-multitenant/tokens  
  
 Wed May 02 2018 18:34:11 GMT+0100 (BST)
[debug] [2018-05-02T17:34:12.403Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'ngfb-multitenant'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-05-02T17:34:18.195Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "~5.12.0",
    "firebase-functions": "^1.0.1"
  },
  "devDependencies": {
    "tslint": "^5.8.0",
    "typescript": "^2.5.3"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-05-02T17:34:18.196Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:34:18 GMT+0100 (BST)
[debug] [2018-05-02T17:34:18.197Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:34:18 GMT+0100 (BST)
[debug] [2018-05-02T17:34:21.287Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:21.822Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-05-02T17:34:21.822Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:34:21 GMT+0100 (BST)
[debug] [2018-05-02T17:34:24.579Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:24.580Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/105654261497:getServerAppConfig  
  
 Wed May 02 2018 18:34:24 GMT+0100 (BST)
[debug] [2018-05-02T17:34:26.605Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-05-02T17:34:26.607Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/ngfb-multitenant/configs  
  
 Wed May 02 2018 18:34:26 GMT+0100 (BST)
[debug] [2018-05-02T17:34:28.336Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (46.16 KB) for uploading
[debug] [2018-05-02T17:34:28.656Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions:generateUploadUrl  
  
 Wed May 02 2018 18:34:28 GMT+0100 (BST)
[debug] [2018-05-02T17:34:30.672Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:30.673Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/5a2d9abd-3bcb-47d6-8b0b-187ec9692582.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525284273&Signature=T1w6jxBLNN%2FpoJ1xDQ22Ptd4ckBEE8Acm7dMc5v1gWSGz0HzMh%2F37%2F%2BaV88X57IGc84zKMWIvNkybIeqd%2BKD0GT9SsXHWVJkPAS%2BMrUbz196ZGmGbvupi%2BnW8J1gZjZz4Z4ZSrqRYJAxwWC884GCt2VYVXzM8LhVV%2BawUxeB%2F4cfX7QmUljQEVY9BysrEu%2FEBigH%2BUXhA1ZwICra5u2ZaVsMjq2Q7SvtpKHAv5AGbAuz%2FN29uuNL58O7hWIBNGRdw9eZes2Yi83mMrBTtNvdkBs8PM2mqR60eIvMYyGZPmHoMl37d7SLOCvE5TCtpMOwlRH4VKJAYlYlOjydCXb9Yg%3D%3D  
 ReadStream {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 65536,
     buffer: BufferList { length: 1 },
     length: 47263,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: true,
     endEmitted: false,
     reading: false,
     errorEmitted: false,
     sync: false,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     emitClose: false,
     destroyed: false,
     defaultEncoding: 'utf8',
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: { end: [Function] },
  _eventsCount: 1,
  _maxListeners: undefined,
  path: '/var/folders/m5/_np__spd73ggl566q0ndqjfh0000gn/T/firebase-functions-753367vadMaD5Uabp.zip',
  fd: 19,
  flags: 'r',
  mode: 438,
  start: undefined,
  end: Infinity,
  autoClose: true,
  pos: undefined,
  bytesRead: 47263,
  closed: false } 
 Wed May 02 2018 18:34:30 GMT+0100 (BST)
[debug] [2018-05-02T17:34:33.658Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-05-02T17:34:33.659Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions  
  
 Wed May 02 2018 18:34:33 GMT+0100 (BST)
[debug] [2018-05-02T17:34:35.038Z] <<< HTTP RESPONSE 200
[info] i  functions: updating function createUser...
[debug] [2018-05-02T17:34:35.040Z] Trigger is:  {"eventTrigger":{"resource":"projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2018-05-02T17:34:35.041Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions/createUser 
query params: {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 
 { sourceUploadUrl: 'https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/5a2d9abd-3bcb-47d6-8b0b-187ec9692582.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525284273&Signature=T1w6jxBLNN%2FpoJ1xDQ22Ptd4ckBEE8Acm7dMc5v1gWSGz0HzMh%2F37%2F%2BaV88X57IGc84zKMWIvNkybIeqd%2BKD0GT9SsXHWVJkPAS%2BMrUbz196ZGmGbvupi%2BnW8J1gZjZz4Z4ZSrqRYJAxwWC884GCt2VYVXzM8LhVV%2BawUxeB%2F4cfX7QmUljQEVY9BysrEu%2FEBigH%2BUXhA1ZwICra5u2ZaVsMjq2Q7SvtpKHAv5AGbAuz%2FN29uuNL58O7hWIBNGRdw9eZes2Yi83mMrBTtNvdkBs8PM2mqR60eIvMYyGZPmHoMl37d7SLOCvE5TCtpMOwlRH4VKJAYlYlOjydCXb9Yg%3D%3D',
  name: 'projects/ngfb-multitenant/locations/us-central1/functions/createUser',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}',
     eventType: 'providers/cloud.firestore/eventTypes/document.create',
     service: 'firestore.googleapis.com' } } 
 Wed May 02 2018 18:34:35 GMT+0100 (BST)
[debug] [2018-05-02T17:34:36.854Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:36.857Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0xoN1M0SGN1TnlN  
  
 Wed May 02 2018 18:34:36 GMT+0100 (BST)
[debug] [2018-05-02T17:34:38.834Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:40.837Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0xoN1M0SGN1TnlN  
  
 Wed May 02 2018 18:34:40 GMT+0100 (BST)
[debug] [2018-05-02T17:34:43.207Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:45.213Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0xoN1M0SGN1TnlN  
  
 Wed May 02 2018 18:34:45 GMT+0100 (BST)
[debug] [2018-05-02T17:34:46.966Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:34:48.970Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL0xoN1M0SGN1TnlN  
  
 Wed May 02 2018 18:34:48 GMT+0100 (BST)
[debug] [2018-05-02T17:34:51.512Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:38:28.049Z] ----------------------------------------------------------------------
[debug] [2018-05-02T17:38:28.052Z] Command:       /usr/local/Cellar/node/10.0.0/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2018-05-02T17:38:28.052Z] CLI Version:   3.18.4
[debug] [2018-05-02T17:38:28.052Z] Platform:      darwin
[debug] [2018-05-02T17:38:28.053Z] Node Version:  v10.0.0
[debug] [2018-05-02T17:38:28.053Z] Time:          Wed May 02 2018 18:38:28 GMT+0100 (BST)
[debug] [2018-05-02T17:38:28.054Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-05-02T17:38:28.064Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-05-02T17:38:28.065Z] > authorizing via signed-in user
[debug] [2018-05-02T17:38:28.066Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:38:28 GMT+0100 (BST)
[debug] [2018-05-02T17:38:28.639Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:38:28.640Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/ngfb-multitenant/tokens  
  
 Wed May 02 2018 18:38:28 GMT+0100 (BST)
[debug] [2018-05-02T17:38:29.116Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'ngfb-multitenant'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-05-02T17:38:34.861Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "~5.12.0",
    "firebase-functions": "^1.0.1"
  },
  "devDependencies": {
    "tslint": "^5.8.0",
    "typescript": "^2.5.3"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-05-02T17:38:34.862Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:38:34 GMT+0100 (BST)
[debug] [2018-05-02T17:38:34.863Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:38:34 GMT+0100 (BST)
[debug] [2018-05-02T17:38:38.054Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:38:38.554Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-05-02T17:38:38.556Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:38:38 GMT+0100 (BST)
[debug] [2018-05-02T17:38:41.498Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:38:41.499Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/105654261497:getServerAppConfig  
  
 Wed May 02 2018 18:38:41 GMT+0100 (BST)
[debug] [2018-05-02T17:38:43.546Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-05-02T17:38:43.547Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/ngfb-multitenant/configs  
  
 Wed May 02 2018 18:38:43 GMT+0100 (BST)
[debug] [2018-05-02T17:38:45.200Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (46.17 KB) for uploading
[debug] [2018-05-02T17:38:45.466Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions:generateUploadUrl  
  
 Wed May 02 2018 18:38:45 GMT+0100 (BST)
[debug] [2018-05-02T17:38:47.438Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:38:47.439Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/31274fcc-e644-4b7a-9870-f75b936e06f6.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525284530&Signature=Q%2BdL4yjnfp4yawqCP0ChV6spEd2V8Q83gt%2Fohj1vljg4u6RMf1x1r9Y6I%2BAv7seF%2FE48gd%2BDuJw1%2Fbe04YuuAIv3eSjvA6%2BXI9dzR9ePR2FWRzDGRne1gQnCIMAtr%2BnYFYJxpGZ%2FGVPiwp1CPXh4pY4PVtiJy5iegBJvY24usHBjJKeTjJKg%2BTpIm0TA0SfaQcXAQDhAYlF%2Fv0SSD0aRdR%2F4sJAt%2FR0FY4EaOSdEjSdZWF7BjmpHv%2BObICoJRrYlpXcSMBXJ0TvIeINcHoucrvaobIMUJgv1TUQKetUl4xqGsCDSY98GPlAW12HgPNBm1xc1f4UPoP7RzVteK1OijQ%3D%3D  
 ReadStream {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 65536,
     buffer: BufferList { length: 1 },
     length: 47280,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: true,
     endEmitted: false,
     reading: false,
     errorEmitted: false,
     sync: false,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     emitClose: false,
     destroyed: false,
     defaultEncoding: 'utf8',
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: { end: [Function] },
  _eventsCount: 1,
  _maxListeners: undefined,
  path: '/var/folders/m5/_np__spd73ggl566q0ndqjfh0000gn/T/firebase-functions-75475K4x5ae32IU2q.zip',
  fd: 19,
  flags: 'r',
  mode: 438,
  start: undefined,
  end: Infinity,
  autoClose: true,
  pos: undefined,
  bytesRead: 47280,
  closed: false } 
 Wed May 02 2018 18:38:47 GMT+0100 (BST)
[debug] [2018-05-02T17:38:50.521Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-05-02T17:38:50.522Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions  
  
 Wed May 02 2018 18:38:50 GMT+0100 (BST)
[debug] [2018-05-02T17:38:52.749Z] <<< HTTP RESPONSE 200
[info] i  functions: updating function createUser...
[debug] [2018-05-02T17:38:52.751Z] Trigger is:  {"eventTrigger":{"resource":"projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2018-05-02T17:38:52.753Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions/createUser 
query params: {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 
 { sourceUploadUrl: 'https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/31274fcc-e644-4b7a-9870-f75b936e06f6.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525284530&Signature=Q%2BdL4yjnfp4yawqCP0ChV6spEd2V8Q83gt%2Fohj1vljg4u6RMf1x1r9Y6I%2BAv7seF%2FE48gd%2BDuJw1%2Fbe04YuuAIv3eSjvA6%2BXI9dzR9ePR2FWRzDGRne1gQnCIMAtr%2BnYFYJxpGZ%2FGVPiwp1CPXh4pY4PVtiJy5iegBJvY24usHBjJKeTjJKg%2BTpIm0TA0SfaQcXAQDhAYlF%2Fv0SSD0aRdR%2F4sJAt%2FR0FY4EaOSdEjSdZWF7BjmpHv%2BObICoJRrYlpXcSMBXJ0TvIeINcHoucrvaobIMUJgv1TUQKetUl4xqGsCDSY98GPlAW12HgPNBm1xc1f4UPoP7RzVteK1OijQ%3D%3D',
  name: 'projects/ngfb-multitenant/locations/us-central1/functions/createUser',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}',
     eventType: 'providers/cloud.firestore/eventTypes/document.create',
     service: 'firestore.googleapis.com' } } 
 Wed May 02 2018 18:38:52 GMT+0100 (BST)
[debug] [2018-05-02T17:38:54.632Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:38:54.635Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyLy1FRmZsSDJuVVpB  
  
 Wed May 02 2018 18:38:54 GMT+0100 (BST)
[debug] [2018-05-02T17:38:56.450Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:38:58.450Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyLy1FRmZsSDJuVVpB  
  
 Wed May 02 2018 18:38:58 GMT+0100 (BST)
[debug] [2018-05-02T17:39:00.105Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:39:02.111Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyLy1FRmZsSDJuVVpB  
  
 Wed May 02 2018 18:39:02 GMT+0100 (BST)
[debug] [2018-05-02T17:39:03.925Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:39:05.929Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyLy1FRmZsSDJuVVpB  
  
 Wed May 02 2018 18:39:05 GMT+0100 (BST)
[debug] [2018-05-02T17:39:07.524Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:45:43.483Z] ----------------------------------------------------------------------
[debug] [2018-05-02T17:45:43.486Z] Command:       /usr/local/Cellar/node/10.0.0/bin/node /usr/local/bin/firebase deploy --only functions --debug
[debug] [2018-05-02T17:45:43.486Z] CLI Version:   3.18.4
[debug] [2018-05-02T17:45:43.486Z] Platform:      darwin
[debug] [2018-05-02T17:45:43.486Z] Node Version:  v10.0.0
[debug] [2018-05-02T17:45:43.487Z] Time:          Wed May 02 2018 18:45:43 GMT+0100 (BST)
[debug] [2018-05-02T17:45:43.487Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-05-02T17:45:43.498Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-05-02T17:45:43.498Z] > authorizing via signed-in user
[debug] [2018-05-02T17:45:43.500Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:45:43 GMT+0100 (BST)
[debug] [2018-05-02T17:45:44.145Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:45:44.146Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/ngfb-multitenant/tokens  
  
 Wed May 02 2018 18:45:44 GMT+0100 (BST)
[debug] [2018-05-02T17:45:44.917Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'ngfb-multitenant'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-05-02T17:45:50.618Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "~5.12.0",
    "firebase-functions": "^1.0.1"
  },
  "devDependencies": {
    "tslint": "^5.8.0",
    "typescript": "^2.5.3"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-05-02T17:45:50.619Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:45:50 GMT+0100 (BST)
[debug] [2018-05-02T17:45:50.619Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/ngfb-multitenant?view=CONSUMER_VIEW  
  
 Wed May 02 2018 18:45:50 GMT+0100 (BST)
[debug] [2018-05-02T17:45:54.115Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:45:54.563Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-05-02T17:45:54.564Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/ngfb-multitenant  
  
 Wed May 02 2018 18:45:54 GMT+0100 (BST)
[debug] [2018-05-02T17:45:57.410Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:45:57.411Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/105654261497:getServerAppConfig  
  
 Wed May 02 2018 18:45:57 GMT+0100 (BST)
[debug] [2018-05-02T17:45:59.681Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-05-02T17:45:59.683Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/ngfb-multitenant/configs  
  
 Wed May 02 2018 18:45:59 GMT+0100 (BST)
[debug] [2018-05-02T17:46:01.306Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (46.5 KB) for uploading
[debug] [2018-05-02T17:46:01.582Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions:generateUploadUrl  
  
 Wed May 02 2018 18:46:01 GMT+0100 (BST)
[debug] [2018-05-02T17:46:03.540Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:46:03.541Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/aea77621-17b1-4d7d-a196-3103eece626f.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525284966&Signature=Q22Kz0olNZ%2FhsZTwjgLk%2Bc4IvVrhuRm%2Fcv5iskoXo0hEczXs4VaJl0Cu3lVoOMYCT8rf1vIMRywv3Et3vnuhIJtOmaUrlrU7HWlXE5uLaRWaYBQFgL0CO%2B28nNqCZYMAqe7xwQafhe5Ff%2FKMZqVonR8VfwYln7%2B7oIl72jIRcX1dX%2BKhdBhK1gd6kDwk7tp4IEqbDn89RyCuAgwlOYXvzMtYEODP23Zj%2BVlWxeBeU%2BMouW7P8N%2BwiuwVCQRJIuHvEvNlSH3NhJaMzvqiFdRSeO7rEJm5s8rSIUToC4pCzaDh8Md%2BvVTsLJXIKM3AUK%2FHwBeRu5ofMbnqPRyGUOTKGQ%3D%3D  
 ReadStream {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 65536,
     buffer: BufferList { length: 1 },
     length: 47614,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: true,
     endEmitted: false,
     reading: false,
     errorEmitted: false,
     sync: false,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     emitClose: false,
     destroyed: false,
     defaultEncoding: 'utf8',
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: { end: [Function] },
  _eventsCount: 1,
  _maxListeners: undefined,
  path: '/var/folders/m5/_np__spd73ggl566q0ndqjfh0000gn/T/firebase-functions-75643eTM1OEa0LZ66.zip',
  fd: 19,
  flags: 'r',
  mode: 438,
  start: undefined,
  end: Infinity,
  autoClose: true,
  pos: undefined,
  bytesRead: 47614,
  closed: false } 
 Wed May 02 2018 18:46:03 GMT+0100 (BST)
[debug] [2018-05-02T17:46:06.583Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-05-02T17:46:06.584Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions  
  
 Wed May 02 2018 18:46:06 GMT+0100 (BST)
[debug] [2018-05-02T17:46:08.186Z] <<< HTTP RESPONSE 200
[info] i  functions: updating function createUser...
[debug] [2018-05-02T17:46:08.189Z] Trigger is:  {"eventTrigger":{"resource":"projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2018-05-02T17:46:08.191Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/ngfb-multitenant/locations/us-central1/functions/createUser 
query params: {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 
 { sourceUploadUrl: 'https://storage.googleapis.com/gcf-upload-us-central1-3ac71c56-d30c-48ef-8cae-d473c1a3b862/aea77621-17b1-4d7d-a196-3103eece626f.zip?GoogleAccessId=105654261497@cloudservices.gserviceaccount.com&Expires=1525284966&Signature=Q22Kz0olNZ%2FhsZTwjgLk%2Bc4IvVrhuRm%2Fcv5iskoXo0hEczXs4VaJl0Cu3lVoOMYCT8rf1vIMRywv3Et3vnuhIJtOmaUrlrU7HWlXE5uLaRWaYBQFgL0CO%2B28nNqCZYMAqe7xwQafhe5Ff%2FKMZqVonR8VfwYln7%2B7oIl72jIRcX1dX%2BKhdBhK1gd6kDwk7tp4IEqbDn89RyCuAgwlOYXvzMtYEODP23Zj%2BVlWxeBeU%2BMouW7P8N%2BwiuwVCQRJIuHvEvNlSH3NhJaMzvqiFdRSeO7rEJm5s8rSIUToC4pCzaDh8Md%2BvVTsLJXIKM3AUK%2FHwBeRu5ofMbnqPRyGUOTKGQ%3D%3D',
  name: 'projects/ngfb-multitenant/locations/us-central1/functions/createUser',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/ngfb-multitenant/databases/(default)/documents/newUsers/{userId}',
     eventType: 'providers/cloud.firestore/eventTypes/document.create',
     service: 'firestore.googleapis.com' } } 
 Wed May 02 2018 18:46:08 GMT+0100 (BST)
[debug] [2018-05-02T17:46:10.006Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:46:10.009Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL1M3RHZxbGdUQUFN  
  
 Wed May 02 2018 18:46:10 GMT+0100 (BST)
[debug] [2018-05-02T17:46:11.952Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:46:13.957Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL1M3RHZxbGdUQUFN  
  
 Wed May 02 2018 18:46:13 GMT+0100 (BST)
[debug] [2018-05-02T17:46:15.683Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:46:17.689Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL1M3RHZxbGdUQUFN  
  
 Wed May 02 2018 18:46:17 GMT+0100 (BST)
[debug] [2018-05-02T17:46:19.630Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:46:21.635Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL1M3RHZxbGdUQUFN  
  
 Wed May 02 2018 18:46:21 GMT+0100 (BST)
[debug] [2018-05-02T17:46:23.290Z] <<< HTTP RESPONSE 200
[debug] [2018-05-02T17:46:25.291Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/bmdmYi1tdWx0aXRlbmFudC91cy1jZW50cmFsMS9jcmVhdGVVc2VyL1M3RHZxbGdUQUFN  
  
 Wed May 02 2018 18:46:25 GMT+0100 (BST)
[debug] [2018-05-02T17:46:27.058Z] <<< HTTP RESPONSE 200
